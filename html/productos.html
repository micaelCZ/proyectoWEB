<!DOCTYPE html>
<html>
  <head>
    <title>Productos</title>
    <meta charset="utf-8">
    <link rel="stylesheet" href="../css/estilo1.css">
    <link rel="icon" type="image/png" href="../img/logo.png"/>
  </head>
  <body>
    <div class="navbar">
      <a href="inicio.html">Inicio</a>
      <div class="dropdown">
        <button class="dropbtn">Inventario 
          <i class="fa fa-caret-down"></i>
        </button>
        <div class="dropdown-content">
          <a href="mPrima.html">Agregar materia prima</a>
          <a href="productos.html">Productos</a>
        </div>
      </div>
      <a href="reportes.html">Reportes</a>
      <a href="contabilidad.html">Contabilidad</a>
      <div id="fecha-hora">Usuario: admin - Fecha y hora: <time datetime=""></time></div>
    </div>
    <div>
    <h1>Resultado del formulario</h1>
    <form action="../php/productos.php" method="post">
      <input type="submit" value="Cargar Datos" onclick="window.location.reload()">
      <br>
    
      <table id="productos-table">
        <thead>
          <tr>
            <th>Nombre del producto</th>
            <th>Cantidad</th>
            <th>Unidad</th>
            <th>Fecha de vencimiento</th>
          </tr>
        </thead>
        <tbody>
        </tbody>
      </table>
    </form>
    
    </div>
    <div id="pie">
        <p>Pastelería Le Postré © 2023 - Todos los derechos reservados</p>
    </div>
    <script src="../js/fechaHora.js"></script>
    <script>
      //obtener datos del archivo json
      fetch('../json/productos.json')
        .then(response => response.json())
        .then(data => {
      //inserta salto de línea en el json
        const jsonStr = JSON.stringify(data, null, 4);

          // crear tabla y agregar datos
          const tableBody = document.querySelector('#productos-table tbody');
          data.forEach(producto => {
            const row = document.createElement('tr');
            const nombreCell = document.createElement('td');
            nombreCell.textContent = producto.nombre;
            row.appendChild(nombreCell);
            const cantidadCell = document.createElement('td');
            cantidadCell.textContent = producto.cantidad;
            row.appendChild(cantidadCell);
            const unidadCell = document.createElement('td');
            unidadCell.textContent = producto.unidad;
            row.appendChild(unidadCell);
            const fechaCell = document.createElement('td');
            fechaCell.textContent = producto.fecha_vencimiento;
            row.appendChild(fechaCell);
            tableBody.appendChild(row);
          });
        });
      
        function buscar() {
  // obtener valor de búsqueda y criterio
  var valorBusqueda = $('#buscar').val().toLowerCase();
  var criterio = $('#criterio').val();

  // filtrar filas de la tabla según el criterio de búsqueda
  $('#productos-table tbody tr').filter(function() {
    // obtener valor de la celda correspondiente al criterio de búsqueda
    var valorCelda = $(this).find('td:eq(' + $('#criterio option:selected').index() + ')').text().toLowerCase();
    // mostrar o ocultar fila según si coincide con el valor de búsqueda
    $(this).toggle(valorCelda.indexOf(valorBusqueda) > -1);
  });
}

    </script>
  </body>
</html>
